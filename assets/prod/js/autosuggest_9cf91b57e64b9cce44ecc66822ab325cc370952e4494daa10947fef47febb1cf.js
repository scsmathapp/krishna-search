var autoSugItemNumbers,ajaxObj=getAjaxObject(),targetID=[],searchID=[],inputID=[];function autoSuggest(b,a,c,d,e,f,g){switch(getKeyCode(e,"keyup")){case 13:case 37:case 39:case 38:case 40:case 33:case 34:case 27:return!1}autoSugPointer[b]=0;targetID[b]=a;searchID[b]=c;inputID[b]=d;countSuggestions[b]=0;a=getElemId(b).value;autoSugItemNumbers=g;f="l="+f+"&input="+a;""!==trim(a)?sendRequest(ajaxObj,"inc/autosuggest.php",f,handleSuggestResponse,b):hideSuggestions()}
function handleSuggestResponse(b){if(4==ajaxObj.readyState&&200==ajaxObj.status)try{for(var a=ajaxObj.responseXML.documentElement.getElementsByTagName("keywords"),c=[],d=0,e=a.length;d<e;d++){var f=a.item(d).firstChild.data.toString();c.push(f)}showSuggestions(c,b)}catch(g){hideSuggestions(b),""!==trim(ajaxObj.responseText)&&alert(ajaxObj.responseText)}}var countSuggestions=[];
function showSuggestions(b,a){getElemId(targetID[a]).style.display="block";var c=getElemId(searchID[a]);c.innerHTML="";for(var d,e=0,f=b.length;e<f;e++)d=a+"-"+(e+1),c.innerHTML+="<li><a id='"+d+'\' href="javascript:void(0);" class="" onmouseover="highlightAutoSuggestKeyNav(\''+(e+1)+"','"+a+"');\" onclick=\"insertKeyword(this.innerHTML, '"+a+"');\">"+b[e]+"</a></li>";countSuggestions[a]=e}var autoSugPointer=[];
function keyBoardNav_onKeyPress(b,a,c){if(13==getKeyCode(b,"keypress"))return ajaxDataLoader({url:a+$("#"+c).serialize(),search:1}),$("#search-list-wrap").hide(),b.preventDefault(),b.stopPropagation(),!1}
function keyBoardNav(b,a){b=getKeyCode(b,"keydown");if(40==b||34==b){if(0<=autoSugPointer[a]&&autoSugPointer[a]<countSuggestions[a]){0!=autoSugPointer[a]&&revertAutoSuggestKeyNav_All(a);switch(b){case 40:autoSugPointer[a]++;break;case 34:autoSugPointer[a]+=autoSugItemNumbers-1}countSuggestions[a]<autoSugPointer[a]&&(autoSugPointer[a]=countSuggestions[a]);changeAutoSuggestKeyNav(autoSugPointer[a],a);autoSugPointer[a]>autoSugItemNumbers?getElemId(searchID[a]).scrollTop=30*(autoSugPointer[a]-autoSugItemNumbers):
getElemId(searchID[a]).scrollTop=0}}else if(38==b||33==b){if(1<autoSugPointer[a]){revertAutoSuggestKeyNav_All(a);switch(b){case 38:autoSugPointer[a]--;break;case 33:autoSugPointer[a]-=autoSugItemNumbers-1}1>autoSugPointer[a]&&(autoSugPointer[a]=1);changeAutoSuggestKeyNav(autoSugPointer[a],a);autoSugPointer[a]<=autoSugItemNumbers?getElemId(searchID[a]).scrollTop=0:getElemId(searchID[a]).scrollTop=30*(autoSugPointer[a]-autoSugItemNumbers)}}else 27==b?(hideSuggestions(a),getElemId(inputID[a]).focus()):
13==b&&autoSugPointer[a]&&(b=getElemId(a+"-"+autoSugPointer[a]).innerHTML,insertKeyword(b,a),$("#search-list-wrap").hide())}function changeAutoSuggestKeyNav(b,a){getElemId(a+"-"+b).className="highlight"}function revertAutoSuggestKeyNav_All(b){for(var a=1,c=countSuggestions[b];a<=c;a++)getElemId(b+"-"+a).className=""}function highlightAutoSuggestKeyNav(b,a){for(var c=1,d=countSuggestions[a];c<=d;c++)getElemId(a+"-"+c).className="";autoSugPointer[a]=b;getElemId(a+"-"+b).className="highlight"}
function hideSuggestions(b){try{getElemId(targetID[b]).style.display="none"}catch(a){}}function insertKeyword(b,a){hideSuggestions(a);getElemId(inputID[a]).value=b;getElemId(inputID[a]).focus()}function getKeyCode(b,a){b=b?b:window.event;code=b.charCode?b.charCode:b.keyCode?b.keyCode:b.which?b.which:0;if(b.type==a)return code}function getElemId(b){return document&&document.getElementById(b)?document.getElementById(b):!1}function trim(b){return b.replace(/(^\s+)|(\s+$)/g,"")}
function getAjaxObject(){var b=!1;window.XMLHttpRequest?b=new XMLHttpRequest:window.ActiveXObject&&(b=new ActiveXObject("Microsoft.XMLHTTP"));return b?b:(alert("Your browser does not support Ajax."),!1)}function sendRequest(b,a,c,d,e){!b||4!=b.readyState&&0!=b.readyState||(b.open("POST",a,!0),b.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),b.onreadystatechange=function(){d(e)},b.send(c))};
